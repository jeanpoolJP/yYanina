<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tu Premio Especial</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="premio.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1 class="title">Â¡Tu Premio Especial!</h1>
        <p class="subtitle">
          <i class="fas fa-sparkles"></i>
          Gira la ruleta mÃ¡gica para descubrir tu recompensa
          <i class="fas fa-sparkles"></i>
        </p>
      </div>

      <div class="main-content">
        <div class="wheel-section">
          <div class="wheel-container">
            <div class="wheel-pointer"></div>
            <div class="wheel" id="wheel">
              <!-- Los elementos de la ruleta se generarÃ¡n con JavaScript -->
            </div>
          </div>

          <button id="spinButton" class="spin-button">
            <i class="fas fa-magic me-2"></i> Descubrir Mi Premio
          </button>
        </div>

        <!-- SecciÃ³n de premios a la derecha -->
        <div class="prizes-section">
          <h2 class="prizes-title">Premios Disponibles</h2>
          <div id="prizesContainer">
            <!-- Los premios se generarÃ¡n con JavaScript -->
          </div>
        </div>
      </div>
    </div>

    <!-- Modal del Premio -->
    <div
      class="modal fade prize-modal"
      id="prizeModal"
      tabindex="-1"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
            <div class="prize-icon" id="prizeIcon"></div>
            <h2 class="prize-title">Â¡Felicitaciones!</h2>
            <p class="prize-subtitle">Has ganado algo especial</p>
            <h3 id="prizeName" class="mb-3"></h3>
            <div class="prize-description">
              <p id="prizeDescription"></p>
            </div>
            <a href="index.html" class="home-button">
              <i class="fas fa-home me-2"></i> Regresar al Inicio
            </a>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Premios disponibles con colores vibrantes
      const prizes = [
        {
          name: "Cena RomÃ¡ntica",
          description:
            "Una cena mÃ¡gica a la luz de las velas con tu comida favorita, mÃºsica suave y toda mi atenciÃ³n para ti. SerÃ¡ una noche que recordaremos para siempre. ðŸ•¯ï¸â¤ï¸",
          icon: "fa-utensils",
          color: "#FF6B6B",
        },
        {
          name: "Noche de PelÃ­culas",
          description:
            "MaratÃ³n de tus pelÃ­culas favoritas acurrucados juntos, con palomitas caseras, tus dulces preferidos y muchos abrazos. El plan perfecto para una noche especial. ðŸŽ¬ðŸ¿",
          icon: "fa-film",
          color: "#4ECDC4",
        },
        {
          name: "Masaje Relajante",
          description:
            "Una hora completa de masajes relajantes con aceites aromÃ¡ticos, mÃºsica relajante y todo mi amor. Te vas a sentir como en las nubes. ðŸ’†â€â™€ï¸âœ¨",
          icon: "fa-spa",
          color: "#FFD166",
        },
        {
          name: "Paseo al Atardecer",
          description:
            "Un paseo romÃ¡ntico de la mano para contemplar juntos el atardecer mÃ¡s hermoso, acompaÃ±ado de conversaciones dulces y momentos Ãºnicos. ðŸŒ…ðŸ’•",
          icon: "fa-sun",
          color: "#F96E46",
        },
        {
          name: "Un beso ",
          description:
            "Despertar con el aroma de un delicioso desayuno preparado con amor, servido en la cama con flores frescas y una sonrisa matutina. ðŸ’‹â˜•",
          icon: "fa-coffee",
          color: "#9C51B6",
        },
        {
          name: "Poema Personalizado",
          description:
            "Un poema Ãºnico y especial escrito desde el corazÃ³n, donde cada verso refleje lo mucho que significas para mÃ­. Palabras que saldrÃ¡n del alma. ðŸ“ðŸ’–",
          icon: "fa-pen-fancy",
          color: "#118AB2",
        },
      ];

      // Elementos DOM
      const wheel = document.getElementById("wheel");
      const spinButton = document.getElementById("spinButton");
      const prizeModal = new bootstrap.Modal(
        document.getElementById("prizeModal")
      );
      const prizeName = document.getElementById("prizeName");
      const prizeDescription = document.getElementById("prizeDescription");
      const prizeIcon = document.getElementById("prizeIcon");
      const prizesContainer = document.getElementById("prizesContainer");

      let canSpin = true;
      let currentRotation = 0;

      // Crear la ruleta con diseÃ±o mejorado (sin texto)
      function createWheel() {
        wheel.innerHTML = "";
        const sliceAngle = 360 / prizes.length;

        prizes.forEach((prize, index) => {
          const angle = sliceAngle * index;
          const wheelItem = document.createElement("div");
          wheelItem.className = "wheel-item";
          wheelItem.style.transform = `rotate(${angle}deg) skewY(${
            90 - sliceAngle
          }deg)`;

          // Crear gradiente para cada segmento
          const lighterColor = adjustBrightness(prize.color, 20);
          wheelItem.style.background = `linear-gradient(135deg, ${prize.color} 0%, ${lighterColor} 100%)`;

          wheel.appendChild(wheelItem);
        });
      }

      // Crear la secciÃ³n de premios
      function createPrizesSection() {
        prizesContainer.innerHTML = "";

        prizes.forEach((prize, index) => {
          const prizeElement = document.createElement("div");
          prizeElement.className = "prize-card";

          prizeElement.innerHTML = `
            <div class="prize-color" style="background: ${prize.color};"></div>
            <div class="prize-info">
              <i class="fas ${prize.icon} prize-icon-small" style="color: ${prize.color};"></i>
              <h3 class="prize-name">${prize.name}</h3>
            </div>
          `;

          prizesContainer.appendChild(prizeElement);
        });
      }

      // FunciÃ³n para ajustar el brillo del color
      function adjustBrightness(hex, percent) {
        const num = parseInt(hex.replace("#", ""), 16);
        const amt = Math.round(2.55 * percent);
        const R = (num >> 16) + amt;
        const G = ((num >> 8) & 0x00ff) + amt;
        const B = (num & 0x0000ff) + amt;
        return (
          "#" +
          (
            0x1000000 +
            (R < 255 ? (R < 1 ? 0 : R) : 255) * 0x10000 +
            (G < 255 ? (G < 1 ? 0 : G) : 255) * 0x100 +
            (B < 255 ? (B < 1 ? 0 : B) : 255)
          )
            .toString(16)
            .slice(1)
        );
      }

      // Girar la ruleta con animaciÃ³n mejorada
      function spinWheel() {
        if (!canSpin) return;

        canSpin = false;
        spinButton.disabled = true;
        spinButton.innerHTML =
          '<i class="fas fa-spinner fa-spin me-2"></i> Girando...';

        // Ãngulo aleatorio con mÃºltiples rotaciones
        const prizeIndex = Math.floor(Math.random() * prizes.length);
        const sliceAngle = 360 / prizes.length;
        const extraRotations = 1440; // 4 rotaciones completas
        const targetAngle =
          extraRotations + (360 - prizeIndex * sliceAngle) - sliceAngle / 2;

        currentRotation += targetAngle;

        // Aplicar la rotaciÃ³n
        wheel.style.transform = `rotate(${currentRotation}deg)`;

        // Mostrar resultado despuÃ©s de la animaciÃ³n
        setTimeout(() => {
          showPrize(prizeIndex);
          spinButton.innerHTML =
            '<i class="fas fa-magic me-2"></i> Descubrir Mi Premio';
        }, 4000);
      }

      // Mostrar el premio en modal
      function showPrize(prizeIndex) {
        const prize = prizes[prizeIndex];

        // Mostrar en el modal
        prizeName.textContent = prize.name;
        prizeDescription.textContent = prize.description;
        prizeIcon.innerHTML = `<i class="fas ${prize.icon}"></i>`;

        // Abrir modal
        prizeModal.show();

        // Volver a activar el botÃ³n
        spinButton.disabled = false;
        spinButton.innerHTML =
          '<i class="fas fa-magic me-2"></i> Descubrir Mi Premio';
        canSpin = true;
      }

      // Event listeners
      spinButton.addEventListener("click", spinWheel);

      // Inicializar la ruleta y la secciÃ³n de premios
      createWheel();
      createPrizesSection();
    </script>
  </body>
</html>
